<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="styles.css" />
    <title>Create Account</title>
  </head>
  <body>
    <div class="container">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">SCMXPertLite</h5>
          <h6 class="card-subtitle mb-2 text-muted">Create Account</h6>
          <!-- <div class="container"> -->
          <div class="error" id="error-msg"></div>
          <form id="signup-form">
            <div class="mb-3">
              <label for="signup-username" class="form-label"
                >What should we cal you?*</label
              >
              <input
                type="text"
                class="form-control"
                id="signup-username"
                placeholder="Enter your full name"
                required
              />
            </div>
            <div class="mb-3">
              <label for="signup-email" class="form-label">Email Address</label>
              <input
                type="email"
                class="form-control"
                id="signup-email"
                placeholder="Enter your email"
                required
              />
            </div>
            <div class="mb-3">
              <label for="signup-password" class="form-label"
                >Create a new password*</label
              >
              <input
                type="password"
                class="form-control"
                id="signup-password"
                placeholder="Create new password"
                required
              />
            </div>
            <div class="mb-3">
              <label for="signup-password" class="form-label"
                >Confirm new password*</label
              >
              <input
                type="password"
                class="form-control"
                id="signup-password"
                placeholder="Confirm new password"
                required
              />
            </div>
            <select
              class="mb-3 form-select"
              aria-label="Default select example"
              id="signup-role"
            >
              <option selected>Select Role</option>
              <option value="Admin">Admin</option>
              <option value="User">User</option>
            </select>
            <div class="mb-3 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="privacy_terms"
                required
              />
              <label class="form-check-label" for="rememberMe"
                >I have read I accept the Privacy Policy & Conditions of
                use</label
              >
            </div>
            <button type="submit" class="btn btn-primary">SIGN UP</button>
          </form>
          <!-- </div> -->
        </div>
      </div>
    </div>
    <!-- <div class="card" style="width: 18rem;">
      <div class="card-body">
        <h5 class="card-title">SCMXPertLite</h5>
        <h6 class="card-subtitle mb-2 text-muted">Create Account</h6>
        <div class="container">
          
          <div class="error" id="error-msg"></div>
            <form id="signup-form">
              <div class="mb-3">
                  <label for="signup-username" class="form-label">What should we cal you?*</label>
                  <input type="text" class="form-control" id="signup-username" placeholder="Enter your full name" required>
              </div>
              <div class="mb-3">
                <label for="signup-email" class="form-label">Email Address</label>
                <input type="email" class="form-control" id="signup-email" placeholder="Enter your email" required>
              </div>
              <div class="mb-3">
                <label for="signup-password" class="form-label">Create a new password*</label>
                <input type="password" class="form-control" id="signup-password" placeholder="Create new password" required>
              </div>
              <div class="mb-3">
                <label for="signup-password" class="form-label">Confirm new password*</label>
                <input type="password" class="form-control" id="signup-password" placeholder="Confirm new password" required>
              </div>
              <select class="mb-3 form-select" aria-label="Default select example" id="signup-role">
                <option selected>Select Role</option>
                <option value="Admin">Admin</option>
                <option value="User">User</option>
              </select>
              <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="privacy_terms" required>
                <label class="form-check-label" for="rememberMe">I have read I accept the Privacy Policy & Conditions of use</label>
              </div>
              <button type="submit" class="btn btn-primary">SIGN UP</button>
            </form>
        </div>
      </div>
    </div> -->

    <!-- <div class="container">
      <h2>SCMXPertLite</h2>
      <h3>Create Account</h3>
      <div class="error" id="error-msg"></div>
        <form id="signup-form">
          <div class="mb-3">
              <label for="signup-username" class="form-label">What should we cal you?*</label>
              <input type="text" class="form-control" id="signup-username" placeholder="Enter your full name" required>
          </div>
          <div class="mb-3">
            <label for="signup-email" class="form-label">Email Address</label>
            <input type="email" class="form-control" id="signup-email" placeholder="Enter your email" required>
          </div>
          <div class="mb-3">
            <label for="signup-password" class="form-label">Create a new password*</label>
            <input type="password" class="form-control" id="signup-password" placeholder="Create new password" required>
          </div>
          <div class="mb-3">
            <label for="signup-password" class="form-label">Confirm new password*</label>
            <input type="password" class="form-control" id="signup-password" placeholder="Confirm new password" required>
          </div>
          <select class="mb-3 form-select" aria-label="Default select example" id="signup-role">
            <option selected>Select Role</option>
            <option value="Admin">Admin</option>
            <option value="User">User</option>
          </select>
          <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="privacy_terms" required>
            <label class="form-check-label" for="rememberMe">I have read I accept the Privacy Policy & Conditions of use</label>
          </div>
          <button type="submit" class="btn btn-dark">SIGN UP</button>
        </form>
    </div> -->
    <script>
      document
        .getElementById("signup-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          const username = document.getElementById("signup-username").value;
          const email = document.getElementById("signup-email").value;
          const password = document.getElementById("signup-password").value;
          const role = document.getElementById("signup-role").value; // Get selected role
          if (role === "Select Role") {
            alert("Please select a role.");
            return;
          }

          fetch("http://localhost:8000/signup", {
            // Replace with your FastAPI backend URL
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              username: username,
              email: email,
              password: password,
              role: role, // Include role in the request body
            }),
          })
            .then((response) => {
              if (response.ok) {
                window.location.href = "/login.html";
              } else {
                response.json().then((data) => {
                  document.getElementById("error-msg").innerText = data.detail;
                });
              }
            })
            .catch((error) => {
              console.error("Error:", error);
            });
        });
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
